import{u as j,a as L,b as S,t as R,c as $,d as D,e as m,f as T,g as F,h as M,S as N,T as A,$ as V,_ as E,i as K,j as O,k as q,l as z}from"./index.head.composable.0417efcb.js";import{h as I,s as g,r as h,A as G,P as H,i as J,o as v,b as y,j as u,w as Q,f as U,u as e,F as W,c as X,k as w,a as Y}from"./entry.666927ee.js";import"./composables.28cb52b0.js";function Z(){const{params:_}=I(),d=j(),i=L(),a=S(),{isLoaded:c}=g(a),n=h(!1);return R(async()=>{if(!c.value)try{n.value=!0;const{token:o,preview:l}=await $.getProjectLivePreviewToken(_.previewId),r=ee(l);d.setProject({project:r}),await G().signIn(o),H().subscribe(r.id,async t=>{const s=D(t);await a.setProduct({product:{...s,fonts:s.fonts||[],colors:s.colors||[],breakPoints:s.breakPoints||[]}}),n.value=!1,s.resources.cmsProjectId&&i.actionInit({cmsId:s.resources.cmsProjectId,isTemplate:!1})})}catch(o){console.error(o)}}),{isLoading:n}}const ee=_=>{const{project_name:d,project_type:i,custom_domain:a,project_display_badge:c,recaptcha_site_key:n,project_id:o}=_;return{name:d,type:i,customDomain:a,displayBadge:c,recaptchaSiteKey:n,id:o,integrations:[]}},te={class:"container"},oe=J({__name:"_previewId",setup(_){const{project:d}=g(j()),{rssMap:i}=g(S()),{isLoading:a}=Z(),c=h(!1),n=I(),o=m(()=>`/live/${n.params.previewId}`),{selectedRoute:l,pageId:r,selectedPage:t}=T(c,o),{dynamicData:s}=F({selectedRoute:l,pageId:r,isSlugNotFound:c}),P=m(()=>o.value+"/"+r.value),f=m(()=>{var p;return{...s.value,$fn:V,$rss:i.value,$route:(p=l.value)==null?void 0:p.params,$url:P.value}});return M(t,f,r,!0),(p,se)=>{const k=E,b=K,x=O,B=q,C=z;return v(),y("div",null,[u(C,null,{default:Q(()=>[U("div",te,[e(t)&&e(t).view&&!e(a)?(v(),y(W,{key:0},[u(N,{"root-dom":e(t).view,"selected-page":e(t)},null,8,["root-dom","selected-page"]),u(A,{selectedPage:e(t)},null,8,["selectedPage"]),u(k),u(b,{isPreview:!0,basePath:e(o),"root-dom":e(t).view,"selected-page":e(t),"page-rm":e(f)},null,8,["basePath","root-dom","selected-page","page-rm"]),e(d).displayBadge?(v(),X(x,{key:0,url:e(P),"selected-page":e(t)},null,8,["url","selected-page"])):w("",!0)],64)):w("",!0),u(B,{loading:e(a)},null,8,["loading"])])]),_:1})])}}});const re=Y(oe,[["__scopeId","data-v-742117ce"]]);export{re as default};
